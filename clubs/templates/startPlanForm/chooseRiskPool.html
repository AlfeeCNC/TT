{% extends 'base.html' %}
{% block title %} 開始風險供給計畫 {% endblock title %}
{% block content %}
<section style="padding-top:48px;">
    <div class="card mx-auto mt-5 shadow-sm w-35" style="width: 18rem; border: transparent;">
        <div class="card-body">
            <h3 class="card-title text-center mt-3" style="color:#982e04;"><strong>開始風險供給</strong></h3>
            <div class="ms-3 me-3">
                <h5 class="card-text mt-5" style="color:#cd9b85;"><strong>STEP.1 實名認證</strong></h5>
            </div>
            <div class="ms-3 me-3">
                <h5 class="card-text mt-3" style="color:#982e04;"><strong>STEP.2 選擇風險池</strong></h5>
                <p class="card-text " style="color:#982e04;"><strong>請選擇參與形式</strong></p>
                <select class="form-select" name="join_typ1" id="join_type1">
                    <option selected>請選擇個人或團體</option>
                    <option value="個人">個人</option>
                    <option value="團體">團體</option>
                </select>
                <select class="form-select mt-1" name="join_type2" id="join_type2">
                    <option value="">請先選擇個人或團體</option>
                </select>
                <div class="mb-3" id="btns">

                </div>
            </div>
        </div>
    </div>
</section>
{% endblock content %}

{% block script %}
<script type="text/javascript">
    var joinType = { "個人": ['請選擇進行方式', '分擔'], "團體": ['請選擇進行方式', '分擔', '互助'] };
    var joinType1 = document.getElementById("join_type1");
    var joinType2 = document.getElementById("join_type2");
    //設定監聽器
    joinType1.addEventListener('change', function () {

        //取得被選中的值
        var selected_option = joinType[this.value];

        //清空副選單現有的值
        while (joinType2.options.length > 0) {
            joinType2.options.remove(0);
        }

        //列出副選單新的值
        Array.from(selected_option).forEach(function (el) {

            let option = new Option(el, el);

            joinType2.appendChild(option);
        });

    });

    joinType2.addEventListener('change', function () {
        var selectedOption001 = joinType1.value;
        var selectedOption002 = this.value;
        var btns = document.getElementById('btns')

        if (joinType1.value == '個人') {
            btns.innerHTML = '<a class="mt-4 btn btn-success w-100" href={% url "createIndividualPlan" %}>創建個人分擔計畫</a>'
        }
        else if (joinType1.value == '團體') {
            if (joinType2.value == '分擔') {
                btns.innerHTML = '<a class="mt-4 btn btn-success w-100" href={% url "startPlanForm" %}>創建風險分擔群組</a> <a class="mt-1 btn btn-warning w-100" href={% url "startPlanForm" %}>加入現有群組</a>'
            }
            else if (joinType2.value == '互助') {
                btns.innerHTML = '<a class="mt-4 btn btn-success w-100" href={% url "startPlanForm" %}>創建風險互助群組</a> <a class="mt-1 btn btn-warning w-100" href={% url "startPlanForm" %}>加入現有群組</a>'
            }
        }
    })
</script>
{% endblock script %}